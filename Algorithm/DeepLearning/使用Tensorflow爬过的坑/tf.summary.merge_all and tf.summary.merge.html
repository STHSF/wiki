<!DOCTYPE HTML>
<html>
<head>
    <link rel="Stylesheet" type="text/css" href="/wiki/static/css/style.css">
    <link rel="Stylesheet" type="text/css" href="/wiki/static/css/tango.css">
    <link rel="shortcut icon" href="/wiki/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/wiki/favicon.ico" type="image/x-icon">
    <title>'ValueError: List argument 'inputs' to 'MergeSummary' Op with length 0 shorter than minimum length 1' and 'Fetch argument None has invalid type <type 'NoneType'>'  - LiYu's personal knowledge wiki</title>
    <meta name="keywords" content="Technology, MachineLearning, DataMining, Economics"/>
    <meta name="description" content="A wiki website of sthsf when I learned new knowledgy and technics."/>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width" />

    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
          tex2jax: {inlineMath: [['$(',')$'], ['\\(','\\)']]}
        });
        </script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>


    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-78529611-1', 'auto');
        ga('send', 'pageview');

    </script>
</head>

<body>
<div id="container">
    
<div id="header">
  <div id="post-nav"><a href="/wiki/">Home</a>&nbsp;»&nbsp;<a href="/wiki/#Algorithm">Algorithm</a>&nbsp;»&nbsp;<a href="/wiki/#-DeepLearning">DeepLearning</a>&nbsp;»&nbsp;<a href="/wiki/#-使用Tensorflow爬过的坑">使用Tensorflow爬过的坑</a>&nbsp;»&nbsp;'ValueError: List argument 'inputs' to 'MergeSummary' Op with length 0 shorter than minimum length 1' and 'Fetch argument None has invalid type <type 'NoneType'>' </div>
</div>
<div class="clearfix"></div>
<div id="title">'ValueError: List argument 'inputs' to 'MergeSummary' Op with length 0 shorter than minimum length 1' and 'Fetch argument None has invalid type <type 'NoneType'>' </div>
<div id="content">
  <h1 id="_1">写在前面</h1>
<p>Tensorboard可以方便的展示神经网络搭建过程，方便查看其中的每一个变量，主要的函数接口就是tf.summary。最近我在搭建神经网络模型的时候遇到了一些问题，记录下来。原先我使用的tensorflow是1.4版本，最近更新到了1.8版本。升级tensorflow的同时，原来代码中的一些接口有相应的变化。</p>
<p>原本在构建神经网络类的时候，使用的是tf.summary.merge_all(), 但是merge_all()是将训练过程中的所有的变量全部保存下来，后来替换成了tf.summary.merge(), 运行过程中出现了下面的错误一，提示inputs参数没有输入，刚开始以为是函数接口改变了，然后还是换成tf.summary.merge_all(),提示没有输入参数，或者输入参数类型不对。在修改了参数之后依然是相同的报错。网上搜到一些相同的报错，但是错误的内容都不一样。</p>
<h1 id="_2">详细错误提示</h1>
<h3 id="_3">错误一</h3>
<div class="hlcode"><pre><span class="nx">Traceback</span> <span class="p">(</span><span class="nx">most</span> <span class="nx">recent</span> <span class="nb">call</span> <span class="nb">last</span><span class="p">):</span>
  <span class="nb">File</span> <span class="s2">&quot;/Users/li/PycharmProjects/RBFuture/src/lstm_n_to_1/model_training.py&quot;</span><span class="p">,</span> <span class="nb">line</span> <span class="mi">160</span><span class="p">,</span> <span class="k">in</span> <span class="o">&lt;</span><span class="nx">module</span><span class="o">&gt;</span>
    <span class="nx">main</span><span class="p">()</span>
  <span class="nb">File</span> <span class="s2">&quot;/Users/li/PycharmProjects/RBFuture/src/lstm_n_to_1/model_training.py&quot;</span><span class="p">,</span> <span class="nb">line</span> <span class="mi">117</span><span class="p">,</span> <span class="k">in</span> <span class="nx">main</span>
    <span class="n">train_model</span> <span class="o">=</span> <span class="nx">RBlstm</span><span class="p">(</span><span class="nx">train_scope</span><span class="p">)</span>
  <span class="nb">File</span> <span class="s2">&quot;/Users/li/PycharmProjects/RBFuture/src/lstm_n_to_1/lstm_model.py&quot;</span><span class="p">,</span> <span class="nb">line</span> <span class="mi">46</span><span class="p">,</span> <span class="k">in</span> <span class="nx">__init__</span>
    <span class="bp">self.</span><span class="nx">merged</span> <span class="o">=</span> <span class="nx">tf.summary.merge</span><span class="p">(</span><span class="nx">tf.get_collection</span><span class="p">(</span><span class="nx">tf.GraphKeys.SUMMARIES</span><span class="p">,</span> <span class="nx">name_scope</span><span class="p">))</span>
  <span class="nb">File</span> <span class="s2">&quot;/Users/li/PycharmProjects/RBFuture/venv/lib/python2.7/site-packages/tensorflow/python/summary/summary.py&quot;</span><span class="p">,</span> <span class="nb">line</span> <span class="mi">298</span><span class="p">,</span> <span class="k">in</span> <span class="nb">merge</span>
    <span class="n">val</span> <span class="o">=</span> <span class="nx">_gen_logging_ops.merge_summary</span><span class="p">(</span><span class="n">inputs</span><span class="o">=</span><span class="nx">inputs</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="nb">name</span><span class="p">)</span>
  <span class="nb">File</span> <span class="s2">&quot;/Users/li/PycharmProjects/RBFuture/venv/lib/python2.7/site-packages/tensorflow/python/ops/gen_logging_ops.py&quot;</span><span class="p">,</span> <span class="nb">line</span> <span class="mi">468</span><span class="p">,</span> <span class="k">in</span> <span class="nx">merge_summary</span>
    <span class="s2">&quot;MergeSummary&quot;</span><span class="p">,</span> <span class="n">inputs</span><span class="o">=</span><span class="nx">inputs</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="nb">name</span><span class="p">)</span>
  <span class="nb">File</span> <span class="s2">&quot;/Users/li/PycharmProjects/RBFuture/venv/lib/python2.7/site-packages/tensorflow/python/framework/op_def_library.py&quot;</span><span class="p">,</span> <span class="nb">line</span> <span class="mi">570</span><span class="p">,</span> <span class="k">in</span> <span class="nx">_apply_op_helper</span>
    <span class="p">(</span><span class="nx">input_name</span><span class="p">,</span> <span class="nx">op_type_name</span><span class="p">,</span> <span class="nx">len</span><span class="p">(</span><span class="nb">values</span><span class="p">),</span> <span class="nx">num_attr.minimum</span><span class="p">))</span>
<span class="nx">ValueError</span><span class="p">:</span> <span class="nb">List</span> <span class="nx">argument</span> <span class="s1">&#39;inputs&#39;</span> <span class="k">to</span> <span class="s1">&#39;MergeSummary&#39;</span> <span class="nx">Op</span> <span class="k">with</span> <span class="nb">length</span> <span class="mi">0</span> <span class="nx">shorter</span> <span class="nx">than</span> <span class="nx">minimum</span> <span class="nb">length</span> <span class="mi">1</span><span class="nx">.</span>
</pre></div>


<h3 id="_4">错误二</h3>
<div class="hlcode"><pre><span class="nx">Traceback</span> <span class="p">(</span><span class="nx">most</span> <span class="nx">recent</span> <span class="nb">call</span> <span class="nb">last</span><span class="p">):</span>
  <span class="nb">File</span> <span class="s2">&quot;/Users/li/PycharmProjects/RBFuture/src/lstm_n_to_1/model_training.py&quot;</span><span class="p">,</span> <span class="nb">line</span> <span class="mi">160</span><span class="p">,</span> <span class="k">in</span> <span class="o">&lt;</span><span class="nx">module</span><span class="o">&gt;</span>
    <span class="nx">main</span><span class="p">()</span>
  <span class="nb">File</span> <span class="s2">&quot;/Users/li/PycharmProjects/RBFuture/src/lstm_n_to_1/model_training.py&quot;</span><span class="p">,</span> <span class="nb">line</span> <span class="mi">154</span><span class="p">,</span> <span class="k">in</span> <span class="nx">main</span>
    <span class="n">summary</span> <span class="o">=</span> <span class="nx">session.run</span><span class="p">(</span><span class="nx">train_model.merged</span><span class="p">,</span> <span class="n">feed_dict</span><span class="o">=</span><span class="nx">feed_dict</span><span class="p">)</span>
  <span class="nb">File</span> <span class="s2">&quot;/Users/li/PycharmProjects/RBFuture/venv/lib/python2.7/site-packages/tensorflow/python/client/session.py&quot;</span><span class="p">,</span> <span class="nb">line</span> <span class="mi">900</span><span class="p">,</span> <span class="k">in</span> <span class="nb">run</span>
    <span class="nx">run_metadata_ptr</span><span class="p">)</span>
  <span class="nb">File</span> <span class="s2">&quot;/Users/li/PycharmProjects/RBFuture/venv/lib/python2.7/site-packages/tensorflow/python/client/session.py&quot;</span><span class="p">,</span> <span class="nb">line</span> <span class="mi">1120</span><span class="p">,</span> <span class="k">in</span> <span class="nx">_run</span>
    <span class="bp">self.</span><span class="nx">_graph</span><span class="p">,</span> <span class="nx">fetches</span><span class="p">,</span> <span class="nx">feed_dict_tensor</span><span class="p">,</span> <span class="n">feed_handles</span><span class="o">=</span><span class="nx">feed_handles</span><span class="p">)</span>
  <span class="nb">File</span> <span class="s2">&quot;/Users/li/PycharmProjects/RBFuture/venv/lib/python2.7/site-packages/tensorflow/python/client/session.py&quot;</span><span class="p">,</span> <span class="nb">line</span> <span class="mi">427</span><span class="p">,</span> <span class="k">in</span> <span class="nx">__init__</span>
    <span class="bp">self.</span><span class="nx">_fetch_mapper</span> <span class="o">=</span> <span class="nx">_FetchMapper.for_fetch</span><span class="p">(</span><span class="nx">fetches</span><span class="p">)</span>
  <span class="nb">File</span> <span class="s2">&quot;/Users/li/PycharmProjects/RBFuture/venv/lib/python2.7/site-packages/tensorflow/python/client/session.py&quot;</span><span class="p">,</span> <span class="nb">line</span> <span class="mi">242</span><span class="p">,</span> <span class="k">in</span> <span class="nx">for_fetch</span>
    <span class="k">type</span><span class="p">(</span><span class="nx">fetch</span><span class="p">)))</span>
<span class="nx">TypeError</span><span class="p">:</span> <span class="nx">Fetch</span> <span class="nx">argument</span> <span class="kc">None</span> <span class="nx">has</span> <span class="nx">invalid</span> <span class="k">type</span> <span class="o">&lt;</span><span class="k">type</span> <span class="s1">&#39;NoneType&#39;</span><span class="o">&gt;</span>
</pre></div>


<h2 id="_5">解决方式</h2>
<p>对于错误二，google上有很多人遇到这个问题，但是大部分错误的原因都是某一个op重新赋值导致变量变成None。等等其他原因。后来我突然发现我使用tf.summary来搜集参数，可是我的模型中却没有添加一些summaries，最后导致了这个问题，所以我在模型中通过tf.summary.scalar()和tf.summary.histogram()等需要记录的变量之后问题就解决了。</p>
<h2 id="_6">疑惑</h2>
<p>具体使用tf.summary.merge_all()和tf.summary.merge()的区别在哪里我还没有搞懂，后面用到之后再讨论。</p>
<h1 id="_7">参考文献</h1>
<p><a href="https://github.com/RobRomijnders/LSTM_tsc/issues/3">TypeError: Fetch argument None has invalid type <class 'NoneType'> </a><br />
<a href="https://stackoverflow.com/questions/39114832/tensorflow-typeerror-fetch-argument-none-has-invalid-type-type-nonetype">Tensorflow TypeError: Fetch argument None has invalid type <type 'NoneType'>?</a></p>
</div>
<div id="content-footer">created in <span class="create-date date"> 2018-05-30 00:00 </span></div>
<div id="comments"></div>
<link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">
<script src="https://imsun.github.io/gitment/dist/gitment.browser.js"></script>
<script type="text/javascript">
const gitment = new Gitment({
  title: ''ValueError: List argument 'inputs' to 'MergeSummary' Op with length 0 shorter than minimum length 1' and 'Fetch argument None has invalid type <type 'NoneType'>' ',
  owner: 'sthsf',
  repo: 'wiki',
  oauth: {
    client_id: '086c54c5fd95adfdc372',
    client_secret: '2ad9ebe87b952d2c77fccf99c334881b91eaa73d',
  },
  // ...
  // For more available options, check out the documentation below
})
gitment.render('comments')
// or
// gitment.render(document.getElementById('comments'))
// or
// document.body.appendChild(gitment.render())
</script>

</div>
<div id="footer">
            <span>
                Copyright © 2025 LiYu.
                Powered by <a href="http://simiki.org/" target="_blank">Simiki</a>.
                Fork me in <a href="https://github.com/sthsf/wiki" target="_blank"> github </a>.
            </span>
</div>


<!--百度统计-->
<script>
    var _hmt = _hmt || [];
    (function() {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?90e1dcdd1938573c19f9ff6521188e91";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
    })();
</script>


</body>
</html>