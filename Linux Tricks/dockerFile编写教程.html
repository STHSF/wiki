<!DOCTYPE HTML>
<html>
<head>
    <link rel="Stylesheet" type="text/css" href="/wiki/static/css/style.css">
    <link rel="Stylesheet" type="text/css" href="/wiki/static/css/tango.css">
    <link rel="shortcut icon" href="/wiki/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/wiki/favicon.ico" type="image/x-icon">
    <title>DokcerFile编写教程 - LiYu's personal knowledge wiki</title>
    <meta name="keywords" content="Technology, MachineLearning, DataMining, Economics"/>
    <meta name="description" content="A wiki website of sthsf when I learned new knowledgy and technics."/>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width" />

    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
          tex2jax: {inlineMath: [['$(',')$'], ['\\(','\\)']]}
        });
        </script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>


    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-78529611-1', 'auto');
        ga('send', 'pageview');

    </script>
</head>

<body>
<div id="container">
    
<div id="header">
  <div id="post-nav"><a href="/wiki/">Home</a>&nbsp;»&nbsp;<a href="/wiki/#Linux Tricks">Linux Tricks</a>&nbsp;»&nbsp;DokcerFile编写教程</div>
</div>
<div class="clearfix"></div>
<div id="title">DokcerFile编写教程</div>
<div id="content">
  <div class="toc"><span class="toctitle">Table of Contents</span><ul>
<li><a href="#_1">一 写在前面</a></li>
<li><a href="#dockerfile">二 Dockerfile基础知识</a><ul>
<li><a href="#21">2.1 常用命令列表</a></li>
<li><a href="#22">2.2 各命令详解</a><ul>
<li><a href="#221-from">2.2.1 FROM</a></li>
<li><a href="#222-maintainer">2.2.2 MAINTAINER</a></li>
<li><a href="#223-run">2.2.3 RUN</a></li>
<li><a href="#224-copy">2.2.4 COPY</a></li>
<li><a href="#225-add">2.2.5 ADD</a></li>
<li><a href="#226-expose">2.2.6 EXPOSE</a></li>
<li><a href="#227-user">2.2.7 USER</a></li>
<li><a href="#228-workdir">2.2.8 WORKDIR</a></li>
<li><a href="#229-env">2.2.9 ENV</a></li>
<li><a href="#2210-volume">2.2.10 VOLUME</a></li>
<li><a href="#2211-cmd">2.2.11 CMD</a></li>
<li><a href="#2212-entrypoint">2.2.12 ENTRYPOINT</a></li>
<li><a href="#2213-demo">2.2.13 简单的demo</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_2">三 基础镜像制作</a><ul>
<li><a href="#31-dockerfile">3.1 基础镜像的Dockerfile</a></li>
</ul>
</li>
<li><a href="#_3">四 项目镜像</a><ul>
<li><a href="#41-dockerfileubuntu">4.1 项目镜像的Dockerfile(Ubuntu)</a></li>
<li><a href="#42-dockerfilecentos">4.2 项目镜像的Dockerfile(CentOS)</a></li>
</ul>
</li>
<li><a href="#_4">五 容器管理</a><ul>
<li><a href="#portainer">Portainer</a><ul>
<li><a href="#51-portainer">5.1、查看, 下载portainer镜像</a></li>
<li><a href="#52dockerui">5.2、启动dockerUI镜像</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#kubernetes">六、kubernetes管理容器</a></li>
<li><a href="#_5">七、坑</a><ul>
<li><a href="#71cmd">7.1、CMD[]中的命令有问题</a></li>
<li><a href="#72docker-d-run">7.2、执行docker -d run之后, 后台却没有启动</a></li>
</ul>
</li>
<li><a href="#_6">八 参考文献</a></li>
</ul>
</div>
<h1 id="_1">一 写在前面</h1>
<p>生成镜像的两种方法：dockerfile创建和手动创建</p>
<p>Dockerfile是由一系列命令和参数构成的脚本，这些命令应用于基础镜像并最终创建一个新的镜像。它们简化了从头到尾的流程并极大的简化了部署工作。Dockerfile从FROM命令开始，紧接着跟随者各种方法，命令和参数。其产出为一个新的可以用于创建容器的镜像，类似于makefile</p>
<h1 id="dockerfile">二 Dockerfile基础知识</h1>
<h2 id="21">2.1 常用命令列表</h2>
<table>
<thead>
<tr>
<th>部分</th>
<th>命令</th>
</tr>
</thead>
<tbody>
<tr>
<td>基础镜像信息</td>
<td>FROM</td>
</tr>
<tr>
<td>维护者信息</td>
<td>MAINTAINER</td>
</tr>
<tr>
<td>镜像操作指令</td>
<td>RUN、COPY、ADD、EXPOSE、WORKDIR、ONBUILD、USER、VOLUME等</td>
</tr>
<tr>
<td>容器启动时执行指令</td>
<td>CMD、ENTRYPOINT</td>
</tr>
</tbody>
</table>
<h2 id="22">2.2 各命令详解</h2>
<h3 id="221-from">2.2.1 FROM</h3>
<p>指定一个镜像作为当前镜像的基础镜像, 如:</p>
<div class="hlcode"><pre><span class="n">FROM</span> <span class="n">ubuntu</span><span class="o">:</span><span class="mf">16.04</span>
</pre></div>


<h3 id="222-maintainer">2.2.2 MAINTAINER</h3>
<p>指明该镜像的作者和电子邮件, 如:</p>
<div class="hlcode"><pre><span class="nx">MAINTAINER</span> <span class="o">&lt;</span><span class="nx">aiministrator</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="nx">aimin</span><span class="p">@</span><span class="mi">163</span><span class="bp">.</span><span class="nx">com</span><span class="o">&gt;</span>
</pre></div>


<h3 id="223-run">2.2.3 RUN</h3>
<p>在新镜像内部运行对应的命令, 主要用于新建文件, 文件目录, 安装软件, 配置一些基础信息等, 如:</p>
<div class="hlcode"><pre>RUN mkdir /home/work/workspace <span class="se">\</span>
    <span class="nb">echo</span> <span class="s2">&quot;hello word&quot;</span> &gt; <span class="se">\ </span>
    /home/work/hello.txt <span class="se">\</span>
    apt-get install -y python3.5
</pre></div>


<p>可以使用换行符<code>\</code>来进行换行操作.</p>
<p>当然, 也可以使用exec的格式的命令, 如:"RUN ["executable", "param1", "param2"]", 其中, executable是命令, 后面的param是参数.</p>
<div class="hlcode"><pre><span class="n">RUN</span> <span class="p">[</span><span class="s">&quot;apt-get&quot;</span><span class="p">,</span> <span class="s">&quot;-y&quot;</span><span class="p">,</span> <span class="s">&quot;nginx&quot;</span><span class="p">]</span>
</pre></div>


<h3 id="224-copy">2.2.4 COPY</h3>
<p>将主机的文件复制到镜像内, 如果目的位置不存在, Docker会自动创建所需要的目录结构, 但是COPY操作只是进行单纯的复制操作, 如:</p>
<div class="hlcode"><pre><span class="n">COPY</span> <span class="n">configure</span><span class="p">.</span><span class="n">conf</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">work</span><span class="o">/</span><span class="n">workspace</span><span class="o">/</span><span class="n">src</span><span class="o">/</span>
</pre></div>


<p><strong>注意：需要复制的目录一定要放在Dockerfile文件的同级目录下</strong></p>
<h3 id="225-add">2.2.5 ADD</h3>
<p>将主机的文件复制到镜像内, 与COPY的使用方式一样, 唯一不同的就是, ADD会对压缩文件（tar, gzip, bzip2, etc）做提取和解压操作.</p>
<h3 id="226-expose">2.2.6 EXPOSE</h3>
<p>暴露镜像的端口供主机映射使用, 启动镜像时, 使用-P参数镜像指定的端口和主机的某一个端口做映射. expose可以指定多个, 如:</p>
<div class="hlcode"><pre><span class="n">EXPOSE</span> <span class="mi">22</span>
<span class="n">EXPOSE</span> <span class="mi">8080</span>
<span class="n">EXPOSE</span> <span class="mi">8989</span>
</pre></div>


<h3 id="227-user">2.2.7 USER</h3>
<p>指定该镜像以什么样的用户去执行, 如:</p>
<div class="hlcode"><pre><span class="n">USER</span> <span class="n">mongo</span>
</pre></div>


<h3 id="228-workdir">2.2.8 WORKDIR</h3>
<p>在构建镜像时, 指定工作目录, 之后的所有命令都是基于此工作目录, 如果不存在则会自动创建, 如:</p>
<div class="hlcode"><pre><span class="n">WORKDIR</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">work</span>
<span class="n">WORKDIR</span> <span class="n">src</span>
<span class="n">RUN</span> <span class="n">echo</span> <span class="s">&quot;hello word&quot;</span> <span class="o">&gt;</span> <span class="n">text</span><span class="p">.</span><span class="n">txt</span>
<span class="cp"># 最终会在/home/work/src/下面生成一个text.txt文件.</span>
</pre></div>


<h3 id="229-env">2.2.9 ENV</h3>
<p>设置docker的环境变量, 如</p>
<div class="hlcode"><pre><span class="n">ENV</span> <span class="n">CORE_DIR</span><span class="o">=/</span><span class="n">home</span><span class="o">/</span><span class="n">work</span><span class="o">/</span><span class="n">src</span>
<span class="n">ENV</span> <span class="n">SCRIPT_DIR</span><span class="o">=</span><span class="err">$</span><span class="n">CORE_DIR</span><span class="o">/</span><span class="n">script</span>
<span class="n">RUN</span> <span class="err">$</span><span class="n">SCRIPT_DIR</span><span class="o">/</span><span class="n">run</span><span class="p">.</span><span class="n">sh</span>
</pre></div>


<h3 id="2210-volume">2.2.10 VOLUME</h3>
<p>用来向基于镜像创建的容器添加卷. 比如, 你可以将mongodb镜像中的存储数据的data文件指定为主机的某个文件.</p>
<div class="hlcode"><pre><span class="cp"># VOLUME 主机目录 容器目录</span>
<span class="n">VOLUME</span> <span class="n">data</span><span class="o">/</span><span class="n">db</span> <span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">onfigdb</span>
</pre></div>


<h3 id="2211-cmd">2.2.11 CMD</h3>
<p>容器启动时需要执行的命令, 如</p>
<div class="hlcode"><pre><span class="n">CMD</span> <span class="n">bin</span><span class="o">/</span><span class="n">bash</span>
</pre></div>


<p>同样可以使用exec的写法,</p>
<div class="hlcode"><pre><span class="n">CMD</span> <span class="p">[</span><span class="s">&quot;bin/bash&quot;</span><span class="p">]</span>
</pre></div>


<p><strong>当有多个CMD时, 只有最后一个生效</strong></p>
<h3 id="2212-entrypoint">2.2.12 ENTRYPOINT</h3>
<p>与CMD的用法一样, 但是CMD和ENTRYPOINT同样作为容器启动时执行的命令,会有以下的区别:</p>
<ul>
<li>CMD的命令会被docker run 命令所覆盖, 但是ECTRYPOINT不会. 而是把docker run 后面的命令当作ENTRYPOINT执行命令的参数</li>
</ul>
<p>如 Dockerfile中有:<br />
<code>ENTRYPOINT ["/usr/sbin/nginx"]</code><br />
  然后通过启动build之后的容器<br />
<code>docker run -it &lt;image&gt; -g "daemon off"</code><br />
  此时, <code>-g "daemon off"</code>会被当作参数传递给ENTRYPOINT, 最后执行的命令变成了<br />
<code>/usr/sbin/nginx -g "daemon off"</code></p>
<ul>
<li>
<p>CMD和ENTRYPOINT同时存在时, CMD的指令会变成ENTRYPOINT的参数，并且此CMD提供的参数会被 docker run 后面的命令覆盖，如<br />
<code>ENTRYPOINT ["echo", "hello", "i am"]
  CMD ["docker]</code><br />
  之后启动构建之后的容器</p>
</li>
<li>
<p>使用<code>docker run -it &lt;image&gt;</code><br />
    输出 hello i am docker</p>
</li>
<li>使用<code>docker run -it &lt;iamge&gt; "word"</code><br />
    输出<code>hello i am word</code></li>
</ul>
<h3 id="2213-demo">2.2.13 简单的demo</h3>
<div class="hlcode"><pre><span class="n">FROM</span> <span class="n">ubuntu</span><span class="o">:</span><span class="mf">16.04</span>
<span class="n">MAINTAINER</span> <span class="n">jerry</span> <span class="n">jerry</span><span class="err">@</span><span class="mf">163.</span><span class="n">com</span>

<span class="n">WORKDIR</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">docker</span>
<span class="n">EXPOSE</span> <span class="mi">22</span>
<span class="n">RUN</span> <span class="n">groupadd</span> <span class="o">-</span><span class="n">r</span> <span class="n">jerry</span> <span class="o">&amp;&amp;</span> <span class="n">useradd</span> <span class="o">-</span><span class="n">r</span> <span class="o">-</span><span class="n">g</span> <span class="n">jerry</span> <span class="n">jerry</span>
<span class="n">RUN</span> <span class="n">mkdir</span> <span class="p">.</span><span class="o">/</span><span class="n">src</span>
<span class="n">USER</span> <span class="n">jerry</span>

<span class="n">ENTRYPOINT</span> <span class="p">[</span><span class="s">&quot;/bin/bash&quot;</span><span class="p">]</span>
</pre></div>


<p>build过程</p>
<div class="hlcode"><pre><span class="n">jerry</span><span class="err">@</span><span class="n">jerry</span><span class="o">:~/</span><span class="n">workshop</span><span class="o">/</span><span class="n">projects</span><span class="o">/</span><span class="n">docker_test</span><span class="err">$</span> <span class="n">sudo</span> <span class="n">docker</span> <span class="n">build</span> <span class="o">-</span><span class="n">t</span> <span class="n">dockertest</span><span class="o">:</span><span class="mf">1.0</span> <span class="p">.</span>
<span class="p">[</span><span class="n">sudo</span><span class="p">]</span> <span class="n">password</span> <span class="k">for</span> <span class="n">jerry</span><span class="o">:</span>
<span class="n">Sending</span> <span class="n">build</span> <span class="n">context</span> <span class="n">to</span> <span class="n">Docker</span> <span class="n">daemon</span>  <span class="mf">2.048</span><span class="n">kB</span>
<span class="n">Step</span> <span class="mi">1</span><span class="o">/</span><span class="mi">8</span> <span class="o">:</span> <span class="n">FROM</span> <span class="n">ubuntu</span><span class="o">:</span><span class="mf">16.04</span>
 <span class="o">---&gt;</span> <span class="mf">7e87</span><span class="n">e2b3bf7a</span>
<span class="n">Step</span> <span class="mi">2</span><span class="o">/</span><span class="mi">8</span> <span class="o">:</span> <span class="n">MAINTAINER</span> <span class="n">jerry</span> <span class="n">jerry</span><span class="err">@</span><span class="mf">163.</span><span class="n">com</span>
 <span class="o">---&gt;</span> <span class="n">Running</span> <span class="n">in</span> <span class="mi">5</span><span class="n">b2c4c331bc9</span>
<span class="n">Removing</span> <span class="n">intermediate</span> <span class="n">container</span> <span class="mi">5</span><span class="n">b2c4c331bc9</span>
 <span class="o">---&gt;</span> <span class="mi">73189</span><span class="n">b8ceeec</span>
<span class="n">Step</span> <span class="mi">3</span><span class="o">/</span><span class="mi">8</span> <span class="o">:</span> <span class="n">WORKDIR</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">docker</span>
 <span class="o">---&gt;</span> <span class="n">Running</span> <span class="n">in</span> <span class="mi">8</span><span class="n">ddfcbe19c73</span>
<span class="n">Removing</span> <span class="n">intermediate</span> <span class="n">container</span> <span class="mi">8</span><span class="n">ddfcbe19c73</span>
 <span class="o">---&gt;</span> <span class="mi">6</span><span class="n">a49fe822d3f</span>
<span class="n">Step</span> <span class="mi">4</span><span class="o">/</span><span class="mi">8</span> <span class="o">:</span> <span class="n">EXPOSE</span> <span class="mi">22</span>
 <span class="o">---&gt;</span> <span class="n">Running</span> <span class="n">in</span> <span class="n">b481784335cc</span>
<span class="n">Removing</span> <span class="n">intermediate</span> <span class="n">container</span> <span class="n">b481784335cc</span>
 <span class="o">---&gt;</span> <span class="mi">9</span><span class="n">b990c863e69</span>
<span class="n">Step</span> <span class="mi">5</span><span class="o">/</span><span class="mi">8</span> <span class="o">:</span> <span class="n">RUN</span> <span class="n">groupadd</span> <span class="o">-</span><span class="n">r</span> <span class="n">jerry</span> <span class="o">&amp;&amp;</span> <span class="n">useradd</span> <span class="o">-</span><span class="n">r</span> <span class="o">-</span><span class="n">g</span> <span class="n">jerry</span> <span class="n">jerry</span>
 <span class="o">---&gt;</span> <span class="n">Running</span> <span class="n">in</span> <span class="n">c0a84adf513f</span>
<span class="n">Removing</span> <span class="n">intermediate</span> <span class="n">container</span> <span class="n">c0a84adf513f</span>
 <span class="o">---&gt;</span> <span class="mi">8</span><span class="n">a8ea468875a</span>
<span class="n">Step</span> <span class="mi">6</span><span class="o">/</span><span class="mi">8</span> <span class="o">:</span> <span class="n">RUN</span> <span class="n">mkdir</span> <span class="p">.</span><span class="o">/</span><span class="n">src</span>
 <span class="o">---&gt;</span> <span class="n">Running</span> <span class="n">in</span> <span class="n">ebde8480c3c6</span>
<span class="n">Removing</span> <span class="n">intermediate</span> <span class="n">container</span> <span class="n">ebde8480c3c6</span>
 <span class="o">---&gt;</span> <span class="mf">47f</span><span class="mi">29299</span><span class="n">b140</span>
<span class="n">Step</span> <span class="mi">7</span><span class="o">/</span><span class="mi">8</span> <span class="o">:</span> <span class="n">USER</span> <span class="n">jerry</span>
 <span class="o">---&gt;</span> <span class="n">Running</span> <span class="n">in</span> <span class="n">cb74c81ea036</span>
<span class="n">Removing</span> <span class="n">intermediate</span> <span class="n">container</span> <span class="n">cb74c81ea036</span>
 <span class="o">---&gt;</span> <span class="mi">24</span><span class="n">d938766125</span>
<span class="n">Step</span> <span class="mi">8</span><span class="o">/</span><span class="mi">8</span> <span class="o">:</span> <span class="n">ENTRYPOINT</span> <span class="p">[</span><span class="s">&quot;/bin/bash&quot;</span><span class="p">]</span>
 <span class="o">---&gt;</span> <span class="n">Running</span> <span class="n">in</span> <span class="mi">17</span><span class="n">c9e3dca85d</span>
<span class="n">Removing</span> <span class="n">intermediate</span> <span class="n">container</span> <span class="mi">17</span><span class="n">c9e3dca85d</span>
 <span class="o">---&gt;</span> <span class="n">bd07ab03e9d9</span>
<span class="n">Successfully</span> <span class="n">built</span> <span class="n">bd07ab03e9d9</span>
<span class="n">Successfully</span> <span class="n">tagged</span> <span class="n">dockertest</span><span class="o">:</span><span class="mf">1.0</span>
</pre></div>


<p>进入docker之后,注意一些变化</p>
<div class="hlcode"><pre>root@jerry:/home/jerry/workshop/projects/docker_test# docker run -it ba0
jerry@051e0e29e94f:/usr/local/docker<span class="nv">$ </span>ls
src
</pre></div>


<p>注意, docker的用户名和RUN产生的结果.</p>
<h1 id="_2">三 基础镜像制作</h1>
<p>基础镜像是镜像中运行的项目或者启动的一些服务，都要在一个基础镜像之上才能运行这些服务，比如一个django项目或者mysql数据库等，都要在Linux操作系统之上来运行，所以打包我们自己的项目时，必须要有个基础镜像来当作我们项目运行的基础环境。</p>
<p>基础镜像一般为某个linux操作系统, 比如centos, ubuntu等. 里面可以包含一些通用的服务, 比如python版本,等等</p>
<h2 id="31-dockerfile">3.1 基础镜像的Dockerfile</h2>
<p>首先我们看一下本地机器的文件目录如下:</p>
<div class="hlcode"><pre>root@jerry:/home/jerry/workshop/projects/docker# ll
total 12
drwxr-xr-x  3 root  root  4096 Jul 18 20:08 ./
drwxrwxrwx 31 jerry jerry 4096 Jul 18 20:00 ../
-rw-r--r--  1 root  root     0 Jul 18 20:01 Dockerfile
drwxr-xr-x  2 root  root  4096 Jul 18 20:08 scripts/
</pre></div>


<p>scripts/目录下保存的是run.sh文件, 文件内容为:</p>
<div class="hlcode"><pre><span class="c">#!/bin/bash</span>

apt-get update
apt-get install -y gcc make <span class="se">\</span>
                -y wget <span class="se">\</span>
                -y net-tools <span class="se">\</span>
                -y inetutils-ping <span class="se">\</span>
                -y apt-utils
<span class="c"># python3.5</span>
wget https://www.python.org/ftp/python/3.5.4/Python-3.5.4.tgz
tar -zxvf Python-3.5.4.tgz
<span class="nb">cd </span>Python-3.5.4
./configure
make <span class="o">&amp;&amp;</span> make install

ln -s /usr/bin/python3 /usr/bin/python
rm -rf Python-3.5.4*

<span class="c"># pip3</span>
apt-get update <span class="o">&amp;&amp;</span> apt-get install -y  python3-pip
</pre></div>


<p>实际上就是简单的安装python3和pip3的过程</p>
<p>下面是一个比较简单的Dockerfile, 主要功能是基于基础镜像, 在基础镜像的基础上执行run.sh中的内容.</p>
<div class="hlcode"><pre><span class="cp"># 基础镜像为ubuntu，版本为16.04，build镜像时会自动下载</span>
<span class="n">FROM</span> <span class="n">ubuntu</span><span class="o">:</span><span class="mf">16.04</span>

<span class="cp"># 制作者信息</span>
<span class="n">MAINTAINER</span> <span class="n">liyu</span> <span class="n">liyu52577</span><span class="err">@</span><span class="mf">163.</span><span class="n">com</span>

<span class="cp"># 设置环境变量</span>
<span class="n">ENV</span> <span class="n">CODE_DIR</span><span class="o">=/</span><span class="n">opt</span><span class="o">/</span><span class="n">workshop</span>
<span class="n">ENV</span> <span class="n">DOCKER_SCRIPTS</span><span class="o">=</span><span class="err">$</span><span class="n">CODE_DIR</span><span class="o">/</span><span class="n">base_image</span><span class="o">/</span><span class="n">scripts</span>

<span class="cp"># 将scripts下的文件复制到镜像中的DOCKER_SCRIPTS目录</span>
<span class="n">COPY</span> <span class="p">.</span><span class="o">/</span><span class="n">scripts</span><span class="o">/*</span> <span class="err">$</span><span class="n">DOCKER_SCRIPTS</span><span class="o">/</span>

<span class="cp"># 执行镜像中的provision.sh脚本</span>
<span class="n">RUN</span> <span class="n">chmod</span> <span class="n">a</span><span class="o">+</span><span class="n">x</span> <span class="err">$</span><span class="n">DOCKER_SCRIPTS</span><span class="o">/*</span>
<span class="n">RUN</span> <span class="err">$</span><span class="n">DOCKER_SCRIPTS</span><span class="o">/</span><span class="n">run</span><span class="p">.</span><span class="n">sh</span>
</pre></div>


<p>其中, run.sh脚本里面的内容也可以直接在dockerfile里面使用RUN编写一些安装过程.</p>
<p>例如, 我们创建一个以centos为基础镜像, 然后在此基础上添加python环境的Dockerfile.</p>
<div class="hlcode"><pre><span class="cp"># 基础镜像Dockerfile, 包含python3.6.8</span>
<span class="n">FROM</span> <span class="n">centos</span><span class="o">:</span><span class="mf">7.6.1810</span>
<span class="n">MAINTAINER</span> <span class="n">liyu</span>

<span class="n">ENV</span> <span class="n">PATH</span> <span class="err">$</span><span class="n">PATH</span><span class="o">:/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">python3</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span>
<span class="n">ENV</span> <span class="n">PYTHONIOENCODING</span> <span class="n">utf</span><span class="o">-</span><span class="mi">8</span>

<span class="n">RUN</span> <span class="n">set</span> <span class="o">-</span><span class="n">ex</span> \
    <span class="o">&amp;&amp;</span> <span class="n">mv</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">yum</span><span class="p">.</span><span class="n">repos</span><span class="p">.</span><span class="n">d</span><span class="o">/</span><span class="n">CentOS</span><span class="o">-</span><span class="n">Base</span><span class="p">.</span><span class="n">repo</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">yum</span><span class="p">.</span><span class="n">repos</span><span class="p">.</span><span class="n">d</span><span class="o">/</span><span class="n">CentOS</span><span class="o">-</span><span class="n">Base</span><span class="p">.</span><span class="n">repo</span><span class="p">.</span><span class="n">backup</span> \
    <span class="o">&amp;&amp;</span> <span class="n">curl</span> <span class="o">-</span><span class="n">o</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">yum</span><span class="p">.</span><span class="n">repos</span><span class="p">.</span><span class="n">d</span><span class="o">/</span><span class="n">CentOS</span><span class="o">-</span><span class="n">Base</span><span class="p">.</span><span class="n">repo</span> <span class="n">http</span><span class="o">:</span><span class="c1">//mirrors.aliyun.com/repo/Centos-7.repo \</span>
<span class="c1">    &amp;&amp; yum makecache \</span>
<span class="c1">    &amp;&amp; sed -i -e &#39;/mirrors.cloud.aliyuncs.com/d&#39; -e &#39;/mirrors.aliyuncs.com/d&#39; /etc/yum.repos.d/CentOS-Base.repo \</span>
<span class="c1">  # 使用yum安装在安装python时需要的工具包</span>
    <span class="o">&amp;&amp;</span> <span class="n">yum</span> <span class="o">-</span><span class="n">y</span> <span class="n">install</span> <span class="n">zlib</span><span class="o">-</span><span class="n">devel</span> <span class="n">bzip2</span><span class="o">-</span><span class="n">devel</span> <span class="n">openssl</span><span class="o">-</span><span class="n">devel</span> <span class="n">ncurses</span><span class="o">-</span><span class="n">devel</span> <span class="n">sqlite</span><span class="o">-</span><span class="n">devel</span> <span class="n">readline</span><span class="o">-</span><span class="n">devel</span> <span class="n">tk</span><span class="o">-</span><span class="n">devel</span> <span class="n">gcc</span> <span class="n">make</span> <span class="n">wget</span> \
    <span class="o">&amp;&amp;</span> <span class="n">yum</span> <span class="n">clean</span> <span class="n">all</span> \
    <span class="o">&amp;&amp;</span> <span class="n">mkdir</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">python3</span> \
    <span class="o">&amp;&amp;</span> <span class="n">wget</span> <span class="n">https</span><span class="o">:</span><span class="c1">//www.python.org/ftp/python/3.6.8/Python-3.6.8.tar.xz \</span>
<span class="c1">    &amp;&amp; tar -xvJf  Python-3.6.8.tar.xz &amp;&amp; rm -f Python-3.6.8.tar.xz \</span>
<span class="c1">    &amp;&amp; cd Python-3.6.8 \</span>
<span class="c1">    &amp;&amp; ./configure prefix=/usr/local/python3 \</span>
<span class="c1">    &amp;&amp; make &amp;&amp; make install \</span>
<span class="c1">    # 使用软连接之后，yum的配置文件需要修改， 具体参考https://www.cnblogs.com/Trees/p/7497268.html</span>
    <span class="err">#</span> <span class="err">暂时的解决方案是进入到</span><span class="n">docker</span><span class="err">中对</span><span class="n">yum</span><span class="err">等配置文件进行修改</span>
    <span class="o">&amp;&amp;</span> <span class="n">ln</span> <span class="o">-</span><span class="n">s</span> <span class="o">-</span><span class="n">f</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">python3</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">python3</span><span class="mf">.6</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">python</span> \
    <span class="o">&amp;&amp;</span> <span class="n">ln</span> <span class="o">-</span><span class="n">s</span> <span class="o">-</span><span class="n">f</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">python3</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">pip3</span><span class="mf">.6</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">pip</span> \
    <span class="o">&amp;&amp;</span> <span class="n">cd</span> <span class="p">..</span> \
    <span class="o">&amp;&amp;</span> <span class="n">rm</span> <span class="o">-</span><span class="n">rf</span> <span class="n">Python</span><span class="o">-</span><span class="mf">3.6.8</span>

<span class="n">RUN</span> <span class="n">rm</span> <span class="o">-</span><span class="n">rf</span> <span class="o">/</span><span class="n">tmp</span>

<span class="n">CMD</span> <span class="p">[</span><span class="s">&quot;bin/bash&quot;</span><span class="p">]</span>
</pre></div>


<p>Dockerfile文件编写完成之后,执行下面的命令</p>
<div class="hlcode"><pre>docker build -t &lt;REPOSITORY&gt;:&lt;TAG&gt;
</pre></div>


<p>这样,就可以生成一个基础镜像了.</p>
<p>当然, 也可以有另外的方式进行安装, 比如, 我们可以直接pull一个纯净的镜像, 然后启动镜像, 在contanier中执行所需要的安装, 安装完成之后可以直接push成image, 这个image跟上面Dockerfile启动的基本上应该没什么区别</p>
<h1 id="_3">四 项目镜像</h1>
<p>基础镜像中包含了通用的一些信息, 这些信息大部分项目中都可能会用到, 或者需要跟某些正式环境中相互一致的信息, 而项目镜像中则需要根据不同项目的需求安装自己的库.比如某个项目需要使用到http和tcp服务等. 同时还可以把自己的项目代码通过Dockerfile复制到容器内, 熟练使用将会非常方便的部署Docker</p>
<h2 id="41-dockerfileubuntu">4.1 项目镜像的Dockerfile(Ubuntu)</h2>
<p>以ubuntu为基础镜像生成项目镜像</p>
<div class="hlcode"><pre><span class="cp">#基础镜像</span>
<span class="n">FROM</span> <span class="n">ubuntu_base</span><span class="o">:</span><span class="mf">1.2</span>

<span class="cp">#语言编码设置</span>
<span class="n">RUN</span> <span class="n">localedef</span> <span class="o">-</span><span class="n">c</span> <span class="o">-</span><span class="n">f</span> <span class="n">UTF</span><span class="o">-</span><span class="mi">8</span> <span class="o">-</span><span class="n">i</span> <span class="n">zh_CN</span> <span class="n">zh_CN</span><span class="p">.</span><span class="n">utf8</span>
<span class="n">ENV</span> <span class="n">LC_ALL</span> <span class="n">zh_CN</span><span class="p">.</span><span class="n">UTF</span><span class="o">-</span><span class="mi">8</span>

<span class="cp">#将项目目录文件复制到镜像中,CODE_DIR是在基础镜像中定义的</span>
<span class="n">COPY</span> <span class="p">.</span><span class="o">/</span><span class="n">jerry</span> <span class="err">$</span><span class="n">CODE_DIR</span><span class="o">/</span><span class="n">jerry</span><span class="o">/</span>

<span class="cp">#安装项目依赖包</span>
<span class="n">RUN</span> <span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">r</span> <span class="err">$</span><span class="n">CODE_DIR</span><span class="o">/</span><span class="n">jerry</span><span class="o">/</span><span class="n">requirements</span><span class="p">.</span><span class="n">txt</span>

<span class="cp">#暴露端口</span>
<span class="n">EXPOSE</span> <span class="mi">8989</span>

<span class="cp">#启动项目</span>
<span class="n">CMD</span> <span class="p">[</span><span class="s">&quot;python&quot;</span><span class="p">,</span> <span class="s">&quot;/opt/workshop/jerry/src/hello.py&quot;</span><span class="p">]</span>
</pre></div>


<h2 id="42-dockerfilecentos">4.2 项目镜像的Dockerfile(CentOS)</h2>
<p>以centos为基础镜像生成项目镜像</p>
<div class="hlcode"><pre><span class="cp"># 推荐系统排序模型DockerFile</span>
<span class="n">FROM</span> <span class="n">deepq</span><span class="o">:</span><span class="mf">1.0</span>
<span class="n">MAINTAINER</span> <span class="n">liyu</span>

<span class="n">RUN</span> <span class="n">mkdir</span> <span class="o">-</span><span class="n">p</span> <span class="o">/</span><span class="n">root</span><span class="o">/</span><span class="n">ai</span><span class="o">/</span><span class="n">files</span><span class="o">/</span><span class="n">recsys</span><span class="o">/</span><span class="n">rank</span><span class="o">-</span><span class="n">model</span><span class="o">/</span><span class="n">rankmodel_lgb</span><span class="o">/</span><span class="mf">0.0.1</span><span class="o">-</span><span class="n">install_files</span><span class="o">/</span>

<span class="n">COPY</span> <span class="p">.</span><span class="o">/</span><span class="n">install_files</span><span class="o">/*</span> <span class="o">/</span><span class="n">root</span><span class="o">/</span><span class="n">ai</span><span class="o">/</span><span class="n">files</span><span class="o">/</span><span class="n">recsys</span><span class="o">/</span><span class="n">rank</span><span class="o">-</span><span class="n">model</span><span class="o">/</span><span class="n">rankmodel_lgb</span><span class="o">/</span><span class="mf">0.0.1</span><span class="o">-</span><span class="n">install_files</span><span class="o">/</span>

<span class="n">ENV</span> <span class="n">LANG</span> <span class="s">&quot;en_US.UTF-8&quot;</span>

<span class="cp"># 基础环境配置</span>
<span class="n">RUN</span> <span class="n">chmod</span> <span class="o">+</span><span class="n">x</span> <span class="o">/</span><span class="n">root</span><span class="o">/</span><span class="n">ai</span><span class="o">/</span><span class="n">files</span><span class="o">/</span><span class="n">recsys</span><span class="o">/</span><span class="n">rank</span><span class="o">-</span><span class="n">model</span><span class="o">/</span><span class="n">rankmodel_lgb</span><span class="o">/</span><span class="mf">0.0.1</span><span class="o">-</span><span class="n">install_files</span><span class="o">/</span><span class="n">start_api</span> \
    <span class="o">&amp;&amp;</span> <span class="n">mkdir</span> <span class="o">/</span><span class="n">root</span><span class="o">/</span><span class="n">ai</span><span class="o">/</span><span class="n">files</span><span class="o">/</span><span class="n">recsys</span><span class="o">/</span><span class="n">rank</span><span class="o">-</span><span class="n">model</span><span class="o">/</span><span class="n">rankmodel_lgb</span><span class="o">/</span><span class="mf">0.0.1</span><span class="o">-</span><span class="n">install_files</span><span class="o">/</span><span class="p">.</span><span class="n">rankmodel_lgb</span> \
    <span class="o">&amp;&amp;</span> <span class="n">mkdir</span> <span class="o">/</span><span class="n">root</span><span class="o">/</span><span class="n">ai</span><span class="o">/</span><span class="n">files</span><span class="o">/</span><span class="n">recsys</span><span class="o">/</span><span class="n">rank</span><span class="o">-</span><span class="n">model</span><span class="o">/</span><span class="n">rankmodel_lgb</span><span class="o">/</span><span class="mf">0.0.1</span><span class="o">-</span><span class="n">install_files</span><span class="o">/</span><span class="p">.</span><span class="n">rankmodel_lgb</span><span class="o">/</span><span class="n">log</span> \
    <span class="o">&amp;&amp;</span> <span class="n">mkdir</span> <span class="o">/</span><span class="n">root</span><span class="o">/</span><span class="n">ai</span><span class="o">/</span><span class="n">files</span><span class="o">/</span><span class="n">recsys</span><span class="o">/</span><span class="n">rank</span><span class="o">-</span><span class="n">model</span><span class="o">/</span><span class="n">rankmodel_lgb</span><span class="o">/</span><span class="mf">0.0.1</span><span class="o">/</span> \
    <span class="o">&amp;&amp;</span> <span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">upgrade</span> <span class="n">pip</span> <span class="o">-</span><span class="n">i</span> <span class="n">https</span><span class="o">:</span><span class="c1">//pypi.tuna.tsinghua.edu.cn/simple \</span>
<span class="c1">    &amp;&amp; pip install --no-cache-dir -r /root/ai/files/recsys/rank-model/rankmodel_lgb/0.0.1-install_files/requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple \</span>
<span class="c1">    &amp;&amp; pip install --no-cache-dir /root/ai/files/recsys/rank-model/rankmodel_lgb/0.0.1-install_files/rankmodel_lgb-0.0.2-py3-none-any.whl</span>

<span class="cp"># LightGBM安装</span>
<span class="n">RUN</span> <span class="n">set</span> <span class="o">-</span><span class="n">ex</span> \
    <span class="o">&amp;&amp;</span> <span class="n">yum</span> <span class="n">install</span> <span class="o">-</span><span class="n">y</span> <span class="n">git</span> \
    <span class="o">&amp;&amp;</span> <span class="n">yum</span> <span class="n">install</span> <span class="o">-</span><span class="n">y</span> <span class="n">gcc</span> <span class="n">gcc</span><span class="o">-</span><span class="n">c</span><span class="o">++</span> <span class="n">make</span> <span class="n">automake</span> \
    <span class="o">&amp;&amp;</span> <span class="n">yum</span> <span class="n">install</span> <span class="o">-</span><span class="n">y</span> <span class="n">cmake</span> \
    <span class="o">&amp;&amp;</span> <span class="n">yum</span> <span class="n">install</span> <span class="o">-</span><span class="n">y</span> <span class="n">setuptool</span>

<span class="n">RUN</span> <span class="n">git</span> <span class="n">clone</span> <span class="o">--</span><span class="n">recursive</span> <span class="o">--</span><span class="n">branch</span> <span class="n">v3</span><span class="o">-</span><span class="n">release</span> <span class="o">--</span><span class="n">depth</span> <span class="mi">1</span> <span class="n">https</span><span class="o">:</span><span class="c1">//github.com/Microsoft/LightGBM &amp;&amp; \</span>
<span class="c1">    mkdir LightGBM/build &amp;&amp; \</span>
<span class="c1">    cd LightGBM/build &amp;&amp; \</span>
<span class="c1">    cmake .. &amp;&amp; \</span>
<span class="c1">    make -j4 &amp;&amp; \</span>
<span class="c1">    make install &amp;&amp; \</span>
<span class="c1">    cd ../ &amp;&amp; \</span>
<span class="c1">    cd python-package/ &amp;&amp; \</span>
<span class="c1">    python setup.py install &amp;&amp; \</span>
<span class="c1">    cd ../.. &amp;&amp; \</span>
<span class="c1">    rm -rf LightGBM</span>

<span class="cp"># java环境配置</span>
<span class="n">RUN</span> <span class="n">yum</span> <span class="n">install</span> <span class="n">java</span><span class="o">-</span><span class="mf">1.8.0</span><span class="o">-</span><span class="n">openjdk</span><span class="o">*</span> <span class="o">-</span><span class="n">y</span> \
    <span class="o">&amp;&amp;</span> <span class="n">export</span> <span class="n">JAVA_HOME</span><span class="o">=/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">jvm</span><span class="o">/</span><span class="n">java</span><span class="o">-</span><span class="mf">1.8.0</span><span class="o">-</span><span class="n">openjdk</span><span class="o">-</span><span class="mf">1.8.0.212</span><span class="p">.</span><span class="n">b04</span><span class="o">-</span><span class="mf">0.</span><span class="n">el7_6</span><span class="p">.</span><span class="n">x86_64</span> \
    <span class="o">&amp;&amp;</span> <span class="n">export</span> <span class="n">JRE_HOME</span><span class="o">=/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">jvm</span><span class="o">/</span><span class="n">java</span><span class="o">-</span><span class="mf">1.8.0</span><span class="o">-</span><span class="n">openjdk</span><span class="o">-</span><span class="mf">1.8.0.212</span><span class="p">.</span><span class="n">b04</span><span class="o">-</span><span class="mf">0.</span><span class="n">el7_6</span><span class="p">.</span><span class="n">x86_64</span> \
    <span class="o">&amp;&amp;</span> <span class="n">export</span> <span class="n">CLASSPATH</span><span class="o">=</span><span class="p">.</span><span class="o">:</span><span class="n">JAVAHOME</span><span class="o">/</span><span class="n">jre</span><span class="o">/</span><span class="n">lib</span><span class="o">:</span><span class="n">JAVA_HOME</span><span class="o">/</span><span class="n">lib</span> \
    <span class="o">&amp;&amp;</span> <span class="n">export</span> <span class="n">PATH</span><span class="o">=</span><span class="n">PATH</span><span class="o">:</span><span class="n">JAVA_HOME</span><span class="o">/</span><span class="n">bin</span>

<span class="n">RUN</span> <span class="n">set</span> <span class="o">-</span><span class="n">ex</span> <span class="n">rm</span> <span class="o">-</span><span class="n">rf</span> <span class="o">/</span><span class="n">tmp</span>

<span class="n">RUN</span> <span class="n">echo</span> <span class="o">=******===================</span> \
    <span class="o">&amp;&amp;</span> <span class="n">ls</span> <span class="o">-</span><span class="n">al</span> <span class="o">/</span><span class="n">root</span><span class="o">/</span><span class="n">ai</span><span class="o">/</span><span class="n">files</span><span class="o">/</span><span class="n">recsys</span><span class="o">/</span><span class="n">rank</span><span class="o">-</span><span class="n">model</span><span class="o">/</span><span class="n">rankmodel_lgb</span><span class="o">/</span><span class="mf">0.0.1</span><span class="o">-</span><span class="n">install_files</span><span class="o">/</span> \
    <span class="o">&amp;&amp;</span> <span class="n">pip</span> <span class="n">list</span>\
    <span class="o">&amp;&amp;</span> <span class="n">echo</span> <span class="o">=****************===================================</span>

<span class="n">RUN</span> <span class="n">yum</span> <span class="n">clean</span> <span class="n">all</span>

<span class="n">CMD</span> <span class="p">[</span><span class="s">&quot;bin/bash&quot;</span><span class="p">]</span>
</pre></div>


<h1 id="_4">五 容器管理</h1>
<h2 id="portainer">Portainer</h2>
<p>轻量级图形页面管理</p>
<h3 id="51-portainer">5.1、查看, 下载portainer镜像</h3>
<div class="hlcode"><pre>docker search portainer
docker pull portainer/portainer
</pre></div>


<h3 id="52dockerui">5.2、启动dockerUI镜像</h3>
<div class="hlcode"><pre><span class="n">docker</span> <span class="n">run</span> <span class="o">-</span><span class="n">d</span> <span class="o">--</span><span class="n">name</span> <span class="n">portainerUI</span> <span class="o">-</span><span class="n">p</span> <span class="mi">9000</span><span class="o">:</span><span class="mi">9000</span> <span class="o">-</span><span class="n">v</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">run</span><span class="o">/</span><span class="n">docker</span><span class="p">.</span><span class="n">sock</span><span class="o">:/</span><span class="n">var</span><span class="o">/</span><span class="n">run</span><span class="o">/</span><span class="n">docker</span><span class="p">.</span><span class="n">sock</span> <span class="n">portainer</span><span class="o">/</span><span class="n">portainer</span>
</pre></div>


<p>启动完成之后, 浏览器访问 http://IP:9000 , 设置一个密码即可，然后点击创建用户(Create user), 就可以在页面中查看和管理本地机器的docker了.</p>
<h1 id="kubernetes">六、kubernetes管理容器</h1>
<h1 id="_5">七、坑</h1>
<h3 id="71cmd">7.1、CMD[]中的命令有问题</h3>
<p><center><img src="/wiki/static/images/docker/docker_run_failed.png" alt="run_failed" height="80" width="800"/></center></p>
<p>运行docker镜像的代码 <code>docker run -q images:tags</code></p>
<p>出现这种情况的主要原因是在启动docker镜像的时候没有指定执行命令, 此时, 就会执行Dockerfile中预设的CMD命令, 但是用于当时Dockerfile中的CMD命令是<code>CMD["usr", "bin", "bash"]</code>, 所以运行镜像会出现上图的错误. </p>
<p>可以将CMD修改成通用的比如<code>CMD["/bin/bash"]</code>等. </p>
<h3 id="72docker-d-run">7.2、执行<code>docker -d run</code>之后, 后台却没有启动</h3>
<ul>
<li>想要后台运行docker, 然后使用<code>docker run -d --name server images:tags</code>, 然后使用<code>docker ps</code>查看, 却发现后台没有运行成功</li>
</ul>
<p>主要原因就是镜像构建过程中Dockerfile添加了<code>CMD["/bin/bash"]</code>命令, 意味着在执行<code>run -d</code>在后台运行的时候，这个镜像创建的容器会首先执行/bin/bash，这意味着，当在后台运行（-d）时，shell立即退出。所以除非命令未在前台运行，否则容器会立即停止</p>
<p>解决方案, 通过<code>-i</code>或者<code>-t</code>为<code>-d</code>提供一个伪"tty n"</p>
<p>比如<code>docker run -i -t -d images:tags</code></p>
<p>另外, Docker官方更是提倡-i 和 -t搭配使用，使其行为类似于shell。</p>
<p>更多细节在官方文档有提到哦<br />
<a href="https://docs.docker.com/engine/reference/run/#detached--d">分离模式</a> and in <a href="https://docs.docker.com/engine/reference/run/#foreground">前台模式 (-t, -i or -it)</a></p>
<h1 id="_6">八 参考文献</h1>
<p><a href="https://blog.csdn.net/wo18237095579/article/details/80540571">Docker Dockerfile 定制镜像</a></p>
<p><a href="https://blog.csdn.net/luanpeng825485697/article/details/81256680">将应用制作成镜像发布到服务器k8s上作为容器微服务运行</a></p>
<p><a href="https://blog.csdn.net/bocai_xiaodaidai/article/details/92838984">python项目打包成docker镜像并发布</a></p>
<p><a href="https://www.cnblogs.com/sammy1989/p/9406899.html">python项目代码打包成Docker镜像</a></p>
<p><a href="https://www.sohu.com/a/156424469_151779">Docker应用配置文件管理的正确姿势</a></p>
</div>
<div id="content-footer">created in <span class="create-date date"> 2019-06-02 00:00 </span></div>
<div id="comments"></div>
<link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">
<script src="https://imsun.github.io/gitment/dist/gitment.browser.js"></script>
<script type="text/javascript">
const gitment = new Gitment({
  title: 'DokcerFile编写教程',
  owner: 'sthsf',
  repo: 'wiki',
  oauth: {
    client_id: '086c54c5fd95adfdc372',
    client_secret: '2ad9ebe87b952d2c77fccf99c334881b91eaa73d',
  },
  // ...
  // For more available options, check out the documentation below
})
gitment.render('comments')
// or
// gitment.render(document.getElementById('comments'))
// or
// document.body.appendChild(gitment.render())
</script>

</div>
<div id="footer">
            <span>
                Copyright © 2020 LiYu.
                Powered by <a href="http://simiki.org/" target="_blank">Simiki</a>.
                Fork me in <a href="https://github.com/sthsf/wiki" target="_blank"> github </a>.
            </span>
</div>


<!--百度统计-->
<script>
    var _hmt = _hmt || [];
    (function() {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?90e1dcdd1938573c19f9ff6521188e91";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
    })();
</script>


</body>
</html>